<h2><%= t("collections.index.#{@collection}").capitalize %> &gt; <span id="current-pic-title"></span></h2>
<h3 id="current-pic-description">&nbsp;</h3>
<h6>(<%= t('collections.more') %>)</h6>
<div id="collection">
  <% 1.upto(6) do |n| %>
    <% title = t("collections.#{@collection}.p#{n}.title") %>
    <% description = t("collections.#{@collection}.p#{n}.description") %>
    
    <%= link_to collections_showpic_path(:name => @collection, :id => n), {:title => title} do %>
      <%= image_tag "/images/collections/#{@collection}/med/p#{n}.jpg", :alt => description, :title => title %>
    <% end %>
  <% end %>
</div>

<script>
  Galleria.loadTheme('/javascripts/galleria/src/themes/classic/galleria.classic.js');
  
  $(function () {
    
    $('#collection').galleria({

      show_info: false,
      
      show: <%= (@id ? (@id.to_i - 1) : 0).to_json %>,
      
      on_image: function(img,thumb) {
        var data = this.getData(this.getIndex());
        $('#current-pic-title').text(data.title);
        $('#current-pic-description').text(data.description);
      },
      
      extend: function () {
        var that = this;
        
        //this.bindTooltip( this.get('images'), <%= raw t('collections.more').to_json %>);
        
        $(document).bind('keydown', function (e) {
          if (e.target.type == 'textarea' || e.target.type == 'input') { return true; }
  
          if (e.keyCode == 39) { that.next(); return false; }
          else if (e.keyCode == 37) { that.prev(); return false; }
        });
      }
    });
  });

</script>